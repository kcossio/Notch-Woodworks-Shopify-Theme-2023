{%- # Label: Associated Product -%}
{%- assign associated_product = section.settings.associated_product -%}

{%- if section.settings.product_name == product.handle -%}

    {{ associated_product.title }}
    {{ associated_product.description }}

    {%- # Label: Heading -%}
    {{ section.settings.heading }} 

    {%- # Label: Hero Image -%}
    {%- assign hero_image = section.settings.hero_image -%}
    {{ hero_image | image_url: width: hero_image.width | image_tag: class: 'add_your_class_here', loading: 'lazy' }}

    {%- # Label: Main Details -%}
    {{ section.settings.main_details }} 

    {%- for block in section.blocks -%}
        {%- case block.type -%}
      
          {%- when 'key_details' -%}
            {%- # Label: Key Detail -%}
            {{ block.settings.key_detail }} 
      
        {%- endcase -%}
      {%- endfor -%}

{%- endif -%}


{% schema %}
  {
  "name": "Product Details",
  "class": "section section-product-details",
  "tag": "section",
  "settings": [
    {
      "type": "product",
      "id": "associated_product",
      "label": "Associated Product",
      "info": "Choose which product this details section should appear on"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Product Details",
      "info": "Add a heading (default is Product Details)"
    },
    {
      "type": "image_picker",
      "id": "hero_image",
      "label": "Hero Image",
      "info": "Choose a hero image for the product"
    },
    {
      "type": "richtext",
      "id": "main_details",
      "label": "Main Details",
      "info": "Add the main details for this product (dimensions, wood, weight, etc.)"
    }
  ],
  "blocks": [
    {
      "name": "Key Details",
      "type": "key_details",
      "settings": [
        {
          "type": "text",
          "id": "key_detail",
          "label": "Key Detail",
          "info": "Add a key detail for this product (appears below the Main Details)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product Details"
    }
  ]
}  
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}