

{%- # Label: Associated Product -%}
{%- assign associated_product = section.settings.associated_product -%}

{%- if section.settings.associated_product == product.handle -%}

{%- # Label: Heading -%}
{{ section.settings.heading }} 

{%- for block in section.blocks -%}
  {%- case block.type -%}

    {%- when 'qa' -%}
      <div class="product__accordion accordion quick-add-hidden" {{ block.shopify_attributes }}>
        <details id="Details-{{ block.id }}-{{ section.id }}">
          <summary>
            <div class="summary__title">
              <h2 class="h4 accordion__title inline-richtext">
                {{ block.settings.title | default: block.settings.page.title }}
              </h2>
            </div>
            {% render 'icon-caret' %}
          </summary>
          <div class="accordion__content rte" id="ProductAccordion-{{ block.id }}-{{ section.id }}">
            {{ block.settings.answer }}
            {{ block.settings.page.content }}
          </div>
        </details>
      </div>

  {%- endcase -%}
{%- endfor -%}

{%- endif -%}

{% schema %}
  {
  "name": "Product FAQs",
  "class": "section section-faqs",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Frequently Asked Questions",
      "info": "Enter the title of this FAQs section"
    },
    {
      "type": "product",
      "id": "associated_product",
      "label": "Associated Product",
      "info": "Choose the product that this FAQs section should appear on"
    }
  ],
  "blocks": [
    {
      "name": "Q&A",
      "type": "qa",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Question",
          "info": "Enter a question"
        },
        {
          "type": "richtext",
          "id": "answer",
          "label": "Answer",
          "info": "Enter an answer"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product FAQs"
    }
  ]
}  
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}