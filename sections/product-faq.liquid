{{ 'section-product-faq.css' | asset_url | stylesheet_tag }}


{%- # Label: Associated Product -%}
{%- assign associated_product = section.settings.associated_product -%}

{%- if section.settings.associated_product == product.handle -%}
<div class="faq-wrap">
  {%- # Label: Heading -%}
  <h2 class="block-header-v3">{{ section.settings.heading }}</h2>
  <div class="faq-inner">
  {%- for block in section.blocks -%}
    {%- case block.type -%}

      {%- when 'qa' -%}

        <toggle-element id="Product-Toggle-{{ block.id }}-{{ section.id }}">
          <toggle-item>
            <h2 class="name ">
              <span>{{ block.settings.title | default: block.settings.page.title }}</span>
              {% render 'icon-close' %}
            </h2>
            <div class="info">
                <div class="content">
                  {{ block.settings.answer }}
              {{ block.settings.page.content }}
                </div>
            </div>
          </toggle-item>
        </toggle-element>

        <div class="product__accordion accordion quick-add-hidden" {{ block.shopify_attributes }}>
          <details id="Details-{{ block.id }}-{{ section.id }}">
            <summary>
              <div class="summary__title">
                <h2 class="h4 accordion__title inline-richtext">
                  {{ block.settings.title | default: block.settings.page.title }}
                </h2>
              </div>
              {% render 'icon-close' %}
            </summary>
            <div class="accordion__content rte" id="ProductAccordion-{{ block.id }}-{{ section.id }}">
              {{ block.settings.answer }}
              {{ block.settings.page.content }}
            </div>
          </details>
        </div>
    {%- endcase -%}
  {%- endfor -%}
  </div><!--End faq-inner-->
</div>
{%- endif -%}

{% schema %}
  {
  "name": "Product FAQs",
  "class": "section section-product-faq section-faq",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Frequently Asked Questions",
      "info": "Enter the title of this FAQs section"
    },
    {
      "type": "product",
      "id": "associated_product",
      "label": "Associated Product",
      "info": "Choose the product that this FAQs section should appear on"
    }
  ],
  "blocks": [
    {
      "name": "Q&A",
      "type": "qa",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Question",
          "info": "Enter a question"
        },
        {
          "type": "richtext",
          "id": "answer",
          "label": "Answer",
          "info": "Enter an answer"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product FAQs"
    }
  ]
}  
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}